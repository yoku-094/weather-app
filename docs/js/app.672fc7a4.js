(function(e){function t(t){for(var i,r,o=t[0],c=t[1],p=t[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(u.length)u.shift()();return n.push.apply(n,p||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={app:0},n=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var p=0;p<o.length;p++)t(o[p]);var l=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"04b2":function(e,t,a){e.exports=a.p+"img/logo_Other.4b71589c.png"},"122b":function(e,t,a){"use strict";a("57e3")},"1b35":function(e){e.exports=JSON.parse('[{"name":"sapporo","text":"北海道","display":"札幌市","prefCode":"01"},{"name":"aomori","text":"青森","display":"青森市","prefCode":"02"},{"name":"morioka","text":"岩手","display":"盛岡市","prefCode":"03"},{"name":"sendai","text":"宮城","display":"仙台市","prefCode":"04"},{"name":"akita","text":"秋田","display":"秋田市","prefCode":"05"},{"name":"yamagata","text":"山形","display":"山形市","prefCode":"06"},{"name":"fukushima","text":"福島","display":"福島市","prefCode":"07"},{"name":"mito","text":"茨城","display":"水戸市","prefCode":"08"},{"name":"utsunomiya","text":"栃木","display":"宇都宮市","prefCode":"09"},{"name":"Maebashi","text":"群馬","display":"前橋市","prefCode":"10"},{"name":"saitama","text":"埼玉","display":"さいたま市","prefCode":"11"},{"name":"chiba","text":"千葉","display":"千葉市","prefCode":"12"},{"name":"shinjuku","text":"東京","display":"新宿区","prefCode":"13"},{"name":"yokohama","text":"神奈川","display":"横浜市","prefCode":"14"},{"name":"niigata","text":"新潟","display":"新潟市","prefCode":"15"},{"name":"toyama","text":"富山","display":"富山市","prefCode":"16"},{"name":"kanazawa","text":"石川","display":"金沢市","prefCode":"17"},{"name":"Fukui","text":"福井","display":"福井市","prefCode":"18"},{"name":"kofu","text":"山梨","display":"甲府市","prefCode":"19"},{"name":"nagano","text":"長野","display":"長野市","prefCode":"20"},{"name":"gifu","text":"岐阜","display":"岐阜市","prefCode":"21"},{"name":"shizuoka","text":"静岡","display":"静岡市","prefCode":"22"},{"name":"nagoya","text":"愛知","display":"名古屋市","prefCode":"23"},{"name":"tsu","text":"三重","display":"津市","prefCode":"24"},{"name":"otsu","text":"滋賀","display":"大津市","prefCode":"25"},{"name":"kyoto","text":"京都","display":"京都市","prefCode":"26"},{"name":"osaka","text":"大阪","display":"大阪市","prefCode":"27"},{"name":"kobe","text":"兵庫","display":"神戸市","prefCode":"28"},{"name":"nara","text":"奈良","display":"奈良市","prefCode":"29"},{"name":"wakayama","text":"和歌山","display":"和歌山市","prefCode":"30"},{"name":"tottori","text":"鳥取","display":"鳥取市","prefCode":"31"},{"name":"matsue","text":"島根","display":"松江市","prefCode":"32"},{"name":"okayama","text":"岡山","display":"岡山市","prefCode":"33"},{"name":"hiroshima","text":"広島","display":"広島市","prefCode":"34"},{"name":"yamaguchi","text":"山口","display":"山口市","prefCode":"35"},{"name":"tokushima","text":"徳島","display":"徳島市","prefCode":"36"},{"name":"takamatsu","text":"香川","display":"高松市","prefCode":"37"},{"name":"matsuyama","text":"愛媛","display":"松山市","prefCode":"38"},{"name":"Kochi","text":"高知","display":"高知市","prefCode":"39"},{"name":"fukuoka","text":"福岡","display":"福岡市","prefCode":"40"},{"name":"saga","text":"佐賀","display":"佐賀市","prefCode":"41"},{"name":"nagasaki","text":"長崎","display":"長崎市","prefCode":"42"},{"name":"kumamoto","text":"熊本","display":"熊本市","prefCode":"43"},{"name":"oita","text":"大分","display":"大分市","prefCode":"44"},{"name":"miyazaki","text":"宮崎","display":"宮崎市","prefCode":"45"},{"name":"kagoshima","text":"鹿児島","display":"鹿児島市","prefCode":"46"},{"name":"naha","text":"沖縄","display":"那覇市","prefCode":"47"}]')},"323b":function(e,t,a){"use strict";a("4a3b")},"4a3b":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i=a("7a23");function s(e,t,a,s,n,r){const o=Object(i["j"])("WeatherTop");return Object(i["f"])(),Object(i["c"])(o)}const n=e=>(Object(i["h"])("data-v-824dffaa"),e=e(),Object(i["g"])(),e),r={key:0,class:"loading-screen"},o={key:1,class:"main"},c={class:"select-city"},p={class:"select-city-items"},l=["value"],d={class:"weather-info-area"},u={class:"weather-info-now"},h={class:"weather-info-1"},m={class:"prefectures"},f={class:"cities"},b={class:"weather-icon"},y=["src"],g={class:"weather-info-2"},j={class:"weather-temp"},C={class:"weather-pressure"},O={class:"weekly-weather-info"},x={class:"table table-bordered text-center"},w=n(()=>Object(i["e"])("th",null,"日付",-1)),v=["innerHTML"],k={class:"weekly-weather-icon"},L=["src"],W={class:"weekly-weather-description"},S={class:"weekly-weather-temp"},_={class:"weekly-weather-pressure"};function D(e,t,a,s,n,D){return null==n.condition?(Object(i["f"])(),Object(i["d"])("div",r)):(Object(i["f"])(),Object(i["d"])("div",o,[Object(i["e"])("div",c,[Object(i["e"])("div",p,[Object(i["m"])(Object(i["e"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectCity=e)},[(Object(i["f"])(!0),Object(i["d"])(i["a"],null,Object(i["i"])(n.cities,e=>(Object(i["f"])(),Object(i["d"])("option",{key:e.name,value:e.name},Object(i["k"])(e.text),9,l))),128))],512),[[i["l"],n.selectCity]]),Object(i["e"])("button",{onClick:t[1]||(t[1]=(...e)=>D.getCurrentLocationWeather&&D.getCurrentLocationWeather(...e))},"現在地の天気")])]),Object(i["e"])("div",d,[Object(i["e"])("div",u,[Object(i["e"])("div",h,[Object(i["e"])("div",m,Object(i["k"])(n.displayName),1),Object(i["e"])("div",f,Object(i["k"])(n.description),1)]),Object(i["e"])("div",b,[Object(i["e"])("img",{src:D.getWeatherIcon(n.condition),alt:"Weather Icon"},null,8,y)]),Object(i["e"])("div",g,[Object(i["e"])("p",null,[Object(i["e"])("span",j,Object(i["k"])(Math.round(n.temp))+" ℃",1)]),Object(i["e"])("p",null,[Object(i["e"])("span",C,Object(i["k"])(n.atmospheric_pressure)+"  hPa",1)])])]),Object(i["e"])("div",O,[Object(i["e"])("table",x,[Object(i["e"])("thead",null,[Object(i["e"])("tr",null,[w,(Object(i["f"])(!0),Object(i["d"])(i["a"],null,Object(i["i"])(n.hours,e=>(Object(i["f"])(),Object(i["d"])("th",{key:e},Object(i["k"])(e)+"時",1))),128))])]),Object(i["e"])("tbody",null,[(Object(i["f"])(!0),Object(i["d"])(i["a"],null,Object(i["i"])(n.forecastData,(e,t)=>(Object(i["f"])(),Object(i["d"])("tr",{key:t},[Object(i["e"])("td",{innerHTML:D.formatDate(e[0].date)},null,8,v),(Object(i["f"])(!0),Object(i["d"])(i["a"],null,Object(i["i"])(e,(e,t)=>(Object(i["f"])(),Object(i["d"])("td",{key:t},[Object(i["e"])("div",k,[Object(i["e"])("img",{src:D.getWeatherIcon(e.condition),alt:"Weather Icon"},null,8,L)]),Object(i["e"])("div",W,Object(i["k"])(e.description),1),Object(i["e"])("div",S,Object(i["k"])(Math.round(e.temp))+" °C ",1),Object(i["e"])("div",_,Object(i["k"])(e.pressure)+" hPa ",1)]))),128))]))),128))])])])])]))}a("14d9");var P=a("bc3a"),M=a.n(P),T=a("1b35");const N="eb7c0edbd3e8755921136e3e1fbc239b";var I={name:"WeatherTop",data(){return{selectCity:"shinjuku",cities:T,city:null,displayName:null,description:null,condition:null,temp:null,atmospheric_pressure:null,hours:[],forecastData:[],suppressWatch:!1,isCurrentLocation:!1}},methods:{getWeather(){M.a.get(`https://api.openweathermap.org/data/2.5/weather?appid=${N}&lang=ja&units=metric`,{params:{q:this.selectCity}}).then(e=>{this.city=e.data.name,this.description=e.data.weather[0].description,this.condition=e.data.weather[0].main,this.temp=e.data.main.temp,this.atmospheric_pressure=e.data.main.pressure,this.getForecast({q:this.selectCity}),this.isCurrentLocation=!1,sessionStorage.isCurrentLocation=this.isCurrentLocation}).catch(e=>{console.log(e),alert("現在地の天気を取得できませんでした")})},getDisplayName(){for(var e in this.cities)this.cities[e].name==this.selectCity&&(this.displayName=this.cities[e].display)},async getCurrentLocationWeather(){try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}),t=e.coords.latitude,a=e.coords.longitude,i=await M.a.get("https://api.openweathermap.org/geo/1.0/reverse",{params:{lat:t,lon:a,limit:1,appid:N}}),s=i.data[0];this.displayName=s.local_names.ja;const n=await M.a.get("https://api.openweathermap.org/data/2.5/weather",{params:{lat:t,lon:a,appid:N,lang:"ja",units:"metric"}}),r=n.data;this.city=r.name,this.description=r.weather[0].description,this.condition=r.weather[0].main,this.temp=r.main.temp,this.atmospheric_pressure=r.main.pressure,await this.getForecast({lat:t,lon:a});const o=await M.a.get("https://mreversegeocoder.gsi.go.jp/reverse-geocoder/LonLatToAddress",{params:{lat:t,lon:a}}),c=o.data.results.muniCd,p=c.slice(0,2),l=this.cities.find(e=>e.prefCode===p);l&&(this.selectCity=l.name,this.suppressWatch=!0,this.isCurrentLocation=!0,sessionStorage.isCurrentLocation=this.isCurrentLocation)}catch(e){console.error("天気取得エラー",e),alert("現在地の天気を取得できませんでした")}},async getForecast({q:e,lat:t,lon:a}){try{const i={appid:N,lang:"ja",units:"metric"};if(t&&a)i.lat=t,i.lon=a;else{if(!e)return void alert("都市名または緯度経度を指定してください");i.q=e}const s=await M.a.get("https://api.openweathermap.org/data/2.5/forecast",{params:i});this.hours=[0,6,9,12,15,18,21];const n={};s.data.list.forEach(e=>{const t=new Date(new Date(1e3*e.dt).toLocaleString("ja-JP",{timeZone:"Asia/Tokyo"})),a=t.getHours(),i=t.toISOString().split("T")[0];var s;this.hours.includes(a)&&(n[i]||(n[i]=[]),n[i].push({date:i,hour:a,temp:e.main.temp,pressure:e.main.pressure,condition:e.weather[0].main,description:e.weather[0].description,rain:(null===(s=e.rain)||void 0===s?void 0:s["3h"])||0,wind:e.wind}))});const r=Object.keys(n).sort().map(e=>n[e].sort((e,t)=>e.hour-t.hour)).filter(e=>e.length===this.hours.length);this.forecastData=r}catch(i){console.error("天気取得エラー",i),alert("週間天気を取得できませんでした")}},getWeatherIcon(e){const t={Clear:a("7ae0"),Clouds:a("eff1"),Rain:a("b393"),Snow:a("cd76")};return t[e]||a("04b2")},formatDate(e){const t=new Date(e),a=t.getMonth()+1,i=t.getDate(),s=["日","月","火","水","木","金","土"],n=s[t.getDay()];return`${a}/${i}<br>（${n}）`}},mounted(){"true"===sessionStorage.isCurrentLocation?this.getCurrentLocationWeather():sessionStorage.selectCity?(this.selectCity=sessionStorage.selectCity,this.getWeather(),this.getDisplayName(),this.isCurrentLocation=!1):(this.getWeather(),this.getDisplayName(),this.isCurrentLocation=!1),sessionStorage.isCurrentLocation=this.isCurrentLocation},watch:{selectCity(e){this.suppressWatch?this.suppressWatch=!1:(this.selectCity=e,sessionStorage.selectCity=e,this.getWeather(),this.getDisplayName())}}},q=(a("122b"),a("6b0d")),F=a.n(q);const J=F()(I,[["render",D],["__scopeId","data-v-824dffaa"]]);var $=J,z={name:"App",components:{WeatherTop:$}};a("323b");const A=F()(z,[["render",s]]);var H=A;Object(i["b"])(H).mount("#app")},"57e3":function(e,t,a){},"7ae0":function(e,t,a){e.exports=a.p+"img/logo_Sunny.b40abfeb.png"},b393:function(e,t,a){e.exports=a.p+"img/logo_Rain.91eb5c7a.png"},cd76:function(e,t,a){e.exports=a.p+"img/logo_Snow.a9f5dacb.png"},eff1:function(e,t,a){e.exports=a.p+"img/logo_Cloud.d6ccaf8d.png"}});
//# sourceMappingURL=app.672fc7a4.js.map